/*
 * Copyright 2015 Afilias Technologies Ltd (dotMobi). All rights reserved.
 * http://deviceatlas.com
 */

var DeviceAtlas=DeviceAtlas||{};DeviceAtlas=(function(k,p,d,t,e,g){var w={apiVersion:"1.3",propsCache:"",cookieName:DeviceAtlas.cookieName||"DAPROPS",cookieExpiryDays:DeviceAtlas.cookieExpiryDays||1,cookieDomain:DeviceAtlas.cookieDomain||null,cookiePath:DeviceAtlas.cookiePath||"/",divStyle:null,ns:{svg:"http://www.w3.org/2000/svg"},cssPrfxs:["Webkit","Moz","O","ms","Khtml"],fncPrfxs:["webkit","moz","o","ms","khtml"],properties:DeviceAtlas.properties||{},getPropertiesAsString:function(){return this.propsCache},getBattery:function(){if(typeof this.battery==="undefined"){return null}return this.battery}},f={},j={"js.webGl":function(){return !!k.WebGLRenderingContext},"js.geoLocation":function(){return !!d.geolocation},"js.webSqlDatabase":function(){return !!k.openDatabase},"js.indexedDB":function(){return a(k,"indexedDB")},"js.webSockets":function(){return a(k,"WebSocket")},"js.localStorage":function(){try{return !!t.getItem}catch(x){return false}},"js.sessionStorage":function(){try{return !!e.getItem}catch(x){return false}},"js.webWorkers":function(){return !!k.Worker},"js.applicationCache":function(){return !!k.applicationCache},"js.supportBasicJavaScript":function(){if((typeof alert!="function")||(typeof confirm!="function")||(typeof setTimeout!="function")||(typeof setInterval!="function")){return false}return !!p.location&&!!p.forms},"js.modifyDom":function(){if(!p.createElement||!p.appendChild){return false}var x,y;x=p.createElement("span");y=p.createElement("div");y.appendChild(x);return(y==x.parentNode)},"js.modifyCss":function(){if(!p.createElement){return false}var x;x=p.createElement("div");if((typeof x.style!="object")||(typeof x.style.display=="undefined")){return false}x.style.display="none";return(x.style.display=="none")},"js.supportEvents":function(){var y={submit:"form",click:"input",change:"input",load:"img",select:"input"};for(var x in y){if(!o(x,y[x])){return false}}return true},"js.supportEventListener":function(){return !!k.addEventListener},"js.xhr":function(){return(typeof XMLHttpRequest=="function")||(typeof XMLHttpRequest=="object")},"js.supportConsoleLog":function(){return(typeof console=="object")&&(typeof console.log=="function")},"js.json":function(){return(typeof JSON=="object")&&(typeof JSON.stringify=="function")},"js.deviceOrientation":function(){if("js.deviceOrientation" in f){return f["js.deviceOrientation"]}else{return false}},"js.deviceMotion":function(){return !!k.DeviceMotionEvent},"js.touchEvents":function(){return("ontouchstart" in k)},"js.querySelector":function(){return !!p.querySelector},"js.battery":function(){if(!("js.battery" in f)){var x=d.battery||d.webkitBattery||d.mozBattery;if(x){w.battery=x}}return !!w.battery},"html.canvas":function(){if(!p.createElement){return false}var x;x=p.createElement("canvas");return !!(x.getContext&&x.getContext("2d"))},"html.video":function(){if(!p.createElement){return false}var z,x=new Boolean();z=p.createElement("video");try{if(x=!!z.canPlayType){x.ogg=z.canPlayType('video/ogg; codecs="theora"');var y='video/mp4; codecs="avc1.42E01E';x.h264=z.canPlayType(y+'"')||z.canPlayType(y+', mp4a.40.2"');x.webm=z.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(A){}return x.valueOf()},"html.audio":function(){if(!p.createElement){return false}var y,x=new Boolean();y=p.createElement("audio");try{if(x=!!y.canPlayType){x.ogg=y.canPlayType('audio/ogg; codecs="vorbis"');x.mp3=y.canPlayType("audio/mpeg;");x.wav=y.canPlayType('audio/wav; codecs="1"');x.m4a=y.canPlayType("audio/x-m4a;")||y.canPlayType("audio/aac;")}}catch(z){}return x.valueOf()},"html.svg":function(){return !!p.createElementNS&&!!p.createElementNS(w.ns.svg,"svg").createSVGRect},"html.inlinesvg":function(){if(!p.createElement){return false}var x;x=p.createElement("div");x.innerHTML="<svg/>";return(x.firstChild&&x.firstChild.namespaceURI)==w.ns.svg},"css.animations":function(){return c("animationName")},"css.columns":function(){return c("columnCount")},"css.transforms":function(){return !!v(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},"css.transitions":function(){return c("transitionProperty")},displayColorDepth:function(){return screen.colorDepth},cookieSupport:function(){if(typeof d.cookieEnabled=="undefined"&&typeof p.cookie=="string"){return true}return !!d.cookieEnabled},orientation:function(){if(typeof k.orientation!="undefined"){return k.orientation}else{return null}},devicePixelRatio:function(){var x=1;try{x=k.devicePixelRatio}catch(y){}return x+""},deviceAspectRatio:function(){var x=["2/3","40/71","3/4","16/9","16/10","375/667","9/16","10/16"];return i("device-aspect-ratio",x)},flashCapable:function(){try{if(d.plugins&&d.plugins.length>0&&d.mimeTypes){var B="application/x-shockwave-flash";if(d.mimeTypes[B]&&d.mimeTypes[B].enabledPlugin){return true}}if((typeof ActiveXObject=="function")||(typeof ActiveXObject=="object")){var x=["ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash"];for(var z in x){try{var y=new ActiveXObject(x[z]);return true}catch(A){}}}}catch(A){}return false},accessDom:function(){return !!p.getElementById&&!!p.getElementsByTagName&&!!p.getElementsByName},userMedia:function(){return a(d,"getUserMedia")}},v=function(x){if(!p.createElement){return null}if(w.divStyle==null){w.divStyle=p.createElement("div").style}if(typeof w.divStyle=="undefined"){return null}for(var y in x){if(typeof w.divStyle[x[y]]!="undefined"){return true}}return false},c=function(y){var z=y.charAt(0).toUpperCase()+y.substr(1),x=(y+" "+w.cssPrfxs.join(z+" ")+z).split(" ");return v(x)},a=function(A,B){var C=!!A[B];if(C){return true}var y=B.charAt(0).toUpperCase()+B.substr(1);for(var z=-1,x=w.fncPrfxs.length;++z<x;){if(!!A[w.fncPrfxs[z]+y]){if(x>1){w.fncPrfxs=[w.fncPrfxs[z]];w.cssPrfxs=[w.cssPrfxs[z]]}return true}}return false},o=function(x,A){if(!p.createElement){return false}var z,y;z=p.createElement(A);x="on"+x;y=x in z;if(!y){if(!z.setAttribute){z=p.createElement("div")}if(!!z.setAttribute&&!!z.removeAttribute){z.setAttribute(x,"");y=(typeof z[x]=="function")}}return y},i=function(y,A){if(typeof k.matchMedia=="undefined"){return null}for(var z in A){var x=k.matchMedia("("+y+":"+A[z]+")");if(x.matches){return A[z]+""}}return null},r=function(){if(!!k.addEventListener&&!!k.removeEventListener){var x=function(y){if(y!=null&&y.alpha!=null){u("js.deviceOrientation",true);m(f)}k.removeEventListener("deviceorientation",x,false)};k.addEventListener("deviceorientation",x,false)}},b=function(){if(typeof w.battery==="undefined"||w.battery==null){if(!!d.getBattery){d.getBattery().then(function(x){w.battery=x;u("js.battery",true);m(f)},function(x){})}}},s=function(){var x;for(var y in w.properties){j[y]=w.properties[y]}for(var y in j){x=j[y]();if(x==null||typeof x=="undefined"){continue}u(y,x)}},h=function(){r();b()},u=function(z,x){var y;if(z.indexOf(".")!=-1){y=z.split(".");if(typeof w[y[0]]=="undefined"){w[y[0]]={}}w[y[0]][y[1]]=x}else{w[z]=x}f[z]=x},q=function(x,y){if(typeof y=="boolean"){return"b"}else{if(typeof y=="number"){return"i"}else{return"s"}}},m=function(y){var z=n(y);var x=new Date();x.setDate(x.getDate()+w.cookieExpiryDays);var A="";if(w.cookieDomain!=null){A=";domain="+w.cookieDomain}p.cookie=w.cookieName+'="'+z+'";expires='+x.toUTCString()+";path="+w.cookiePath+A},n=function(A){var x="",z;for(var y in A){z=q(y,A[y]);x+=z+y+":"+((z=="b")?A[y]+0:A[y])+"|"}w.propsCache=x.slice(0,-1);return w.propsCache},l=function(){h();s();if(f.cookieSupport){m(f)}};l();return w})(window,document,navigator,localStorage,sessionStorage);